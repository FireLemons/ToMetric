<!DOCTYPE html>
<html>
	<head>
        <meta charset="UTF-8">
		<title>To Metric</title>
		<link rel="stylesheet" href="css/materialize.min.css">
		<link rel="stylesheet" href="css/theme.css">
		<link rel="stylesheet" href="css/conversion.css">
		<script src="js/lodash.min.js"></script>
		<script src="js/materialize.min.js"></script>
		<script src="js/vue.min.js"></script>
        <script type="text/x-mathjax-config">
          MathJax.Hub.Config({
            CommonHTML: {
              scale: 256
            }
          });
        </script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_CHTML"></script>
	</head>
	<body class="grey darken-4">
		<div id="navBar">
			<site-nav></site-nav>
		</div>
		<div id="app" class="container">
            <transition name="fade">
                <div id="load-overlay" class="grey darken-3" v-if="overlay" @click="overlay = loaded ? false : true">
                    <noscript>
                        <style>
                            #load-content{
                                display: none;
                            }
                        </style>
                        <h4 class="center-align white-text">ToMetric needs javascript to run.</h4>
                    </noscript>
                    <div id="load-content" class="center-align" v-if="!loaded">
                        <h2>Loading</h2>
                        <svg width="208" height="64" xmlns="http://www.w3.org/2000/svg">
                            <rect width="4" height="64" />
                            <rect x="8" width="4" height="32"/>
                            <rect x="16" width="4" height="32"/>
                            <rect x="24" width="4" height="32"/>
                            <rect x="32" width="4" height="32"/>
                            <rect x="40" width="4" height="48"/>
                            <rect x="48" width="4" height="32"/>
                            <rect x="56" width="4" height="32"/>
                            <rect x="64" width="4" height="32"/>
                            <rect x="72" width="4" height="32"/>
                            <rect x="80" width="4" height="64"/>
                            <rect x="88" width="4" height="32"/>
                            <rect x="96" width="4" height="32"/>
                            <rect x="104" width="4" height="32"/>
                            <rect x="112" width="4" height="32"/>
                            <rect x="120" width="4" height="48"/>
                            <rect x="128" width="4" height="32"/>
                            <rect x="136" width="4" height="32"/>
                            <rect x="144" width="4" height="32"/>
                            <rect x="152" width="4" height="32"/>
                            <rect x="160" width="4" height="64" />
                            <rect x="168" width="4" height="32"/>
                            <rect x="176" width="4" height="32"/>
                            <rect x="184" width="4" height="32"/>
                            <rect x="192" width="4" height="32"/>
                            <rect x="200" width="4" height="48"/>
                        </svg>
                    </div>
                    <transition name="fade">
                        <div id="metric-fact" v-if="loaded" v-html="metricFact">
                        </div>
                    </transition>
                </div>
            </transition>
			<div id="display" class="grey darken-3">
				<div>
                    <div id="stats" class="flex">
                        <div class="flex">
                            <span class="label">
                                Level
                            </span>
                            <span>
                                {{ level }}
                            </span>
                        </div>
                        <div class="flex">
                            <span class="label">
                                Level Progress
                            </span>
                            <div>
                                <transition name="increase-indication" mode="out-in">
                                    <span :key="levelUpProgress">
                                        {{ levelUpProgress }}
                                    </span>
                                </transition>
                                /
                                <transition name="increase-indication" mode="out-in">
                                    <span :key="levelUpQuota">
                                        {{ levelUpQuota }}
                                    </span>
                                </transition>
                            </div>
                        </div>
                        <div class="flex">
                            <span class="label">
                                Difficulty
                            </span>
                            <transition name="increase-indication" mode="out-in">
                                <span :key="difficulty">
                                    {{ difficulty }}
                                </span>
                            </transition>
                        </div>
                    </div>
                    <a class="btn-large center-align grey darken-2" @click="showFormula=true">Show Formula</a>
				</div>
                <transition name="flash" v-on:after-enter="showFormula=false">
                    <div id="formula" class="grey darken-3" v-show="showFormula"><!--Math formulas rendered here--></div>
                </transition>
			</div>
			<div id="conversionInput">
				<div class="flex">
                    <div class="flex">
                        <input type="text" class="grey darken-2" v-model="givenWithoutFloatErrors" readonly>
                        <input type="text" :value="imperialAbbrev" disabled>
                    </div>
                    <label> = </label>
                    <div class="flex">
                        <input class="input-field" type="number" v-bind:class="answerClass" v-model="userAnswer" @keyup.enter="checkAnswer">
                        <input type="text" :value="metricAbbrev" disabled>
                    </div>
				</div>
			</div>
            <!-- Round Stats Modal -->
            <div id="round-stats" class="modal modal-fixed-footer">
                <div class="modal-content grey darken-3">
                    <h4 class="center-align white-text">Round Stats</h4>
                    <table class="centered">
                        <thead>
                            <tr>
                                <th>Customary Unit</th>
                                <th>Exact Answer</th>
                                <th>Error Amount</th>
                                <th>% Error</th>
                                <th># Tries</th>
                            </tr>
                        </thead>
                        <tbody>
                          <tr v-for="problemStats in roundStats">
                            <td>{{problemStats.given}}</td>
                            <td>{{problemStats.exactConversion}}</td>
                            <td>{{problemStats.errorAmount}}</td>
                            <td>{{problemStats.errorPercent}}</td>
                            <td>{{problemStats.tries}}</td>
                          </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer grey darken-3">
                    <a href="#!" class="modal-close btn-flat white-text">Next</a>
                </div>
            </div>
		</div>
        
		<script src="js/nav.js"></script>
		<script src="js/conversion.js"></script>
	</body>
</html>